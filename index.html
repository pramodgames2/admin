<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Black Store Admin - Secure Access</title>
    <style>
        body { background: #000; color: #fff; font-family: 'Segoe UI', sans-serif; display: flex; justify-content: center; align-items: center; height: 100vh; margin: 0; }
        .admin-box { width: 450px; background: #0a0a0a; padding: 30px; border: 1px solid #333; border-radius: 20px; display: none; box-shadow: 0 10px 30px rgba(0,0,0,0.5); }
        .login-box { text-align: center; background: #0a0a0a; padding: 50px; border: 1px solid #333; border-radius: 20px; }
        h2 { letter-spacing: 4px; margin-bottom: 25px; color: #fff; font-weight: 300; }
        label { font-size: 11px; color: #888; display: block; text-align: left; margin-top: 12px; text-transform: uppercase; letter-spacing: 1px; }
        input { width: 100%; padding: 12px; margin: 5px 0; background: #000; border: 1px solid #222; color: #fff; border-radius: 8px; box-sizing: border-box; outline: none; transition: 0.3s; }
        input:focus { border-color: #555; }
        button { width: 100%; padding: 15px; background: #fff; color: #000; border: none; font-weight: bold; cursor: pointer; border-radius: 8px; margin-top: 20px; transition: 0.3s; }
        button:hover { background: #ccc; transform: translateY(-2px); }
        .google-btn { background: #db4437; color: #fff; font-size: 16px; border-radius: 8px; }
        .status { color: #0f0; text-align: center; margin-top: 15px; font-weight: bold; font-size: 14px; }
    </style>
</head>
<body>

    <div id="loginArea" class="login-box">
        <h2>BLACK STORE</h2>
        <p style="color: #666; font-size: 13px; margin-bottom: 20px;">Secure Admin Login</p>
        <button class="google-btn" onclick="adminLogin()">Login with Google</button>
    </div>

    <div id="adminPanel" class="admin-box">
        <h2 id="adminTitle">ADMIN PANEL</h2>
        <label>Game Title</label>
        <input type="text" id="gTitle" placeholder="e.g. Cyberpunk 2077">
        <label>Platform/Type</label>
        <input type="text" id="gType" placeholder="e.g. PC Game / Free">
        <label>File Size</label>
        <input type="text" id="gSize" placeholder="e.g. 70 GB">
        <label>Rating</label>
        <input type="text" id="gRating" placeholder="e.g. 9.0">
        <label>Image URL (Direct Link)</label>
        <input type="text" id="gImg" placeholder="Paste image address here">
        <label>Download URL</label>
        <input type="text" id="gLink" placeholder="Paste download link here">
        <button onclick="saveGame()" style="background: #fff; color: #000;">ADD TO STORE.HTML</button>
        <button onclick="logout()" style="background: transparent; color: #555; border: 1px solid #222; margin-top: 15px;">Logout</button>
        <div id="status" class="status"></div>
    </div>

<script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
    import { getAuth, signInWithPopup, GoogleAuthProvider, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";
    import { getDatabase, ref, push, set, serverTimestamp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js";

    const firebaseConfig = {
        apiKey: "AIzaSyC0ZqCnq28-bauG3YBb7WrVVNdQgYOGmqg",
        authDomain: "black-store-login.firebaseapp.com",
        databaseURL: "https://black-store-login-default-rtdb.asia-southeast1.firebasedatabase.app",
        projectId: "black-store-login",
        storageBucket: "black-store-login.firebasestorage.app",
        messagingSenderId: "980593701862",
        appId: "1:980593701862:web:eabd842d94a728c2c9c27"
    };

    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);
    const db = getDatabase(app);
    const provider = new GoogleAuthProvider();

    const ADMIN_EMAIL = "Shiyamal5005@Gmail.com"; 

    window.adminLogin = () => {
        signInWithPopup(auth, provider).catch(err => alert("Error: " + err.message));
    };

    window.logout = () => signOut(auth).then(() => location.reload());

    onAuthStateChanged(auth, (user) => {
        if (user) {
            if (user.email === ADMIN_EMAIL) {
                document.getElementById('loginArea').style.display = 'none';
                document.getElementById('adminPanel').style.display = 'block';
            } else {
                alert("Access Denied! You are not the authorized Admin.");
                signOut(auth);
            }
        } else {
            document.getElementById('loginArea').style.display = 'block';
            document.getElementById('adminPanel').style.display = 'none';
        }
    });

    window.saveGame = () => {
        const title = document.getElementById('gTitle').value;
        const type = document.getElementById('gType').value;
        const size = document.getElementById('gSize').value;
        const rating = document.getElementById('gRating').value;
        const imageURL = document.getElementById('gImg').value;
        const downloadURL = document.getElementById('gLink').value;

        if(!title || !imageURL || !downloadURL) { alert("Please fill all essential fields!"); return; }

        const newGameRef = push(ref(db, 'games'));
        set(newGameRef, {
            title, type, size, rating, imageURL, downloadURL,
            addedAt: serverTimestamp()
        }).then(() => {
            document.getElementById('status').innerText = "âœ… Game Uploaded Successfully!";
            document.querySelectorAll('input').forEach(i => i.value = "");
            setTimeout(() => { document.getElementById('status').innerText = ""; }, 3000);
        }).catch(err => alert("Error: " + err.message));
    };
</script>
</body>
</html>